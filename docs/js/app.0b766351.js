(function(){"use strict";var t={3572:function(t,e,n){var o=n(144),s=n(998),r=n(3059),i=function(){var t=this,e=t._self._c;return e(s.Z,[e(r.Z,[t.songs.length>0?e("router-view",{attrs:{title:t.title,body:t.body,hashtag:t.hashtag,songs:t.songs}}):t._e()],1)],1)},l=[],a=n(196),c={name:"App",data:()=>({title:"COUNT DOWN CAOFF 投票",body:'今年も<a href="https://arcane.com/ja-jp/" target="_blank">COUNTDOWN CAOFF</a>が12月31日に開催されます。<br/>\nそこで、2021年に発表されたアニソンの中で皆さんが良かったと思う曲ベスト10を決めたいと思います!!<br/>\nランキングは皆さんの投票で決定します。<br/>',hashtag:"caoff2023",songs:[]}),mounted(){a.ZP.get("https://db9qp4rc97c3t.cloudfront.net/caoffVoteInfo").then((t=>{this.title=t.data.title,this.body=t.data.body,this.hashtag=t.data.hashtag,this.songs=t.data.songs,document.title=this.title}))}},u=c,d=n(1001),g=(0,d.Z)(u,i,l,!1,null,null,null),h=g.exports,f=n(8345),p=n(6190),m=n(266),v=n(2150),S=n(1713),y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"top"},[e(v.Z,[e(S.Z,[e(m.Z,{attrs:{cols:"12"}},[e("h1",[t._v(t._s(t.title))])]),e(m.Z,{attrs:{cols:"12"}},[e("div",{domProps:{innerHTML:t._s(t.body)}})]),e(m.Z,{staticClass:"text-center",attrs:{cols:"12"}},[e(p.Z,{attrs:{"x-large":"",color:"primary"},on:{click:t.onClickNext}},[t._v("投票ページへ")])],1)],1)],1)],1)},b=[],Z=(n(7658),{props:{title:String,body:String},methods:{onClickNext:function(){this.$router.push("/songList")}}}),C=Z,_=(0,d.Z)(C,y,b,!1,null,null,null),k=_.exports,x=n(6072),w=n(1154),O=n(2016),P=n(9582),T=n(120),j=n(5808),F=n(4525),B=n(5187),M=n(8071),N=n(7912),L=n(7423),q=n(28),A=function(){var t=this,e=t._self._c;return e("div",{staticClass:"songList"},[e(P.Z,[e(x.Z,{attrs:{fixed:""}},[e(q.Z,{staticClass:"mt-auto mb-auto mr-1",attrs:{solo:"",placeholder:"曲名/番組名で検索","prepend-inner-icon":"mdi-magnify"},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}),e(w.Z,{attrs:{color:"error",overlap:"","offset-y":"20",content:t.selectedSongs.length,value:t.selectedSongs.length>=1}},[e(O.Z,{attrs:{borderless:"",color:"primary"},model:{value:t.toggleBtn,callback:function(e){t.toggleBtn=e},expression:"toggleBtn"}},[e(p.Z,[t._v("選んだ曲")])],1)],1)],1),e(L.Z,[e(v.Z,[e("p",{staticClass:"mt-16"},[t._v("まずは3曲選ぼう。リストにない場合はtweetする時に自分で追加してね。")]),e(j.Z,{staticClass:"mb-12",attrs:{"two-line":""}},[e(N.Z,{attrs:{multiple:"",max:"3"},model:{value:t.listModel,callback:function(e){t.listModel=e},expression:"listModel"}},[t._l(t.filteredSongs,(function(n){return e(F.Z,{key:n.id,attrs:{value:n},on:{click:function(e){return t.listOnClick(n)}},scopedSlots:t._u([{key:"default",fn:function({active:o}){return[e(B.Z,[e(T.Z,{attrs:{"input-value":o,readonly:""}})],1),e(M.km,[e(M.V9,{domProps:{textContent:t._s(n.songTitle)}}),e(M.oZ,{domProps:{textContent:t._s(n.animeTitle)}})],1)]}}],null,!0)})}))],2)],1),e("div",{staticStyle:{position:"fixed",bottom:"20px",width:"100%","text-align":"center"}},[e(p.Z,{staticStyle:{width:"200px"},attrs:{color:"primary"},on:{click:function(e){return e.stopPropagation(),t.onClickSelectPriority.apply(null,arguments)}}},[t._v("順位を決める ")])],1)],1)],1)],1)],1)},$=[];const I="selectedSongs";var z={props:{songs:Array},data:()=>({songsForSearch:[],selectedSongs:[],query:"",toggleBtn:void 0}),methods:{onClickSelectPriority:function(){sessionStorage.setItem(I,JSON.stringify(this.selectedSongs)),this.$router.push("/vote")},normarize:function(t){const e=/[\u30A1-\u30FA]/g;return t.toLowerCase().replace(e,(t=>String.fromCharCode(t.charCodeAt(0)-96)))},listOnClick:function(t){const e=this.selectedSongs.filter((e=>e.id!=t.id));e.length<this.selectedSongs.length?this.selectedSongs=e:this.selectedSongs.length<3&&this.selectedSongs.push(t)}},computed:{filteredSongs:function(){if(void 0!==this.toggleBtn)return this.songsForSearch.filter((t=>this.selectedSongs.find((e=>e.id==t.id))));const t=this.normarize(this.query);return this.songsForSearch.filter((e=>0==this.query.length||e.searchString.includes(t)))},listModel:{get:function(){return this.filteredSongs.filter((t=>this.selectedSongs.find((e=>e.id==t.id))))},set:function(t){t.length}}},mounted(){Object.prototype.hasOwnProperty.call(sessionStorage,I)&&(this.selectedSongs=JSON.parse(sessionStorage.getItem(I))),this.songsForSearch=this.songs.concat(),this.songsForSearch.forEach((t=>{t.searchString=this.normarize(t.songTitle)+"_"+this.normarize(t.animeTitle)}))}},D=z,E=(0,d.Z)(D,A,$,!1,null,null,null),J=E.exports,U=n(4324),V=n(4611),W=function(){var t=this,e=t._self._c;return e("div",{staticClass:"vote"},[e(v.Z,[e(S.Z,[e(m.Z,{attrs:{cols:"12"}},[e("p",[t._v("並び変えて順位を決めたら、投票するボタンをクリック！")]),e(j.Z,{attrs:{"two-line":""}},[[e("draggable",{attrs:{draggable:".draggable-item"},model:{value:t.selectedSongs,callback:function(e){t.selectedSongs=e},expression:"selectedSongs"}},t._l(t.selectedSongs,(function(n,o){return e(F.Z,{key:`${o}`,staticClass:"elevation-4 ma-2 draggable-item",attrs:{value:n}},[e(V.Z,[e(U.Z,{attrs:{color:t.iconColor(o)}},[t._v("mdi-numeric-"+t._s(o+1)+"-box")])],1),e(M.km,[e(M.V9,{domProps:{textContent:t._s(n.songTitle)}}),e(M.oZ,{domProps:{textContent:t._s(n.animeTitle)}})],1)],1)})),1)]],2)],1),e(m.Z,{staticClass:"text-center",attrs:{cols:"12"}},[e(p.Z,{staticClass:"mr-2",attrs:{"x-large":""},on:{click:t.onClickBack}},[t._v("戻る")]),e(p.Z,{attrs:{"x-large":"",color:"primary"},on:{click:t.onClickTweet}},[e(U.Z,[t._v("mdi-twitter")]),t._v(" 投票する ")],1)],1)],1)],1)],1)},H=[],R=n(9980),G=n.n(R),K={props:{hashtag:String},data:()=>({selectedSongs:[],draggableModel:[]}),components:{draggable:G()},methods:{iconColor:function(t){switch(t){case 0:return"#E6B422";case 1:return"#C0C0C0";default:return"#BB641D"}},onClickTweet:function(){const t=new URL("https://twitter.com/intent/tweet");t.searchParams.set("text",this.selectedSongs.map(((t,e)=>"string"==typeof t.id&&t.id.startsWith("empty-")?e+1+"位:{入力してください}":e+1+"位:"+t.songTitle)).join("\n")+"\n"+location.href.replace(/vote$/,"")),t.searchParams.set("hashtags",this.hashtag),sessionStorage.removeItem(I),window.location.href=t},onClickBack:function(){this.$router.push("/songList")}},mounted(){if(Object.prototype.hasOwnProperty.call(sessionStorage,I)&&(this.selectedSongs=JSON.parse(sessionStorage.getItem(I))),this.selectedSongs.length<3)for(let t=this.selectedSongs.length;t<3;t++)this.selectedSongs.push({songTitle:"tweetするときに曲名を入力してね",animeTitle:"",id:"empty-"+t})}},Q=K,X=(0,d.Z)(Q,W,H,!1,null,null,null),Y=X.exports;o.ZP.use(f.ZP);const tt=[{path:"/",name:"top",component:k,props:!0},{path:"/songList",name:"songList",component:J,props:!0},{path:"/vote",name:"vote",component:Y,props:!0}],et=new f.ZP({mode:"history",base:"/",routes:tt});var nt=et,ot=n(8864);o.ZP.use(ot.Z);var st=new ot.Z({});o.ZP.config.productionTip=!1,new o.ZP({router:nt,vuetify:st,render:t=>t(h)}).$mount("#app")}},e={};function n(o){var s=e[o];if(void 0!==s)return s.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,n),r.exports}n.m=t,function(){var t=[];n.O=function(e,o,s,r){if(!o){var i=1/0;for(u=0;u<t.length;u++){o=t[u][0],s=t[u][1],r=t[u][2];for(var l=!0,a=0;a<o.length;a++)(!1&r||i>=r)&&Object.keys(n.O).every((function(t){return n.O[t](o[a])}))?o.splice(a--,1):(l=!1,r<i&&(i=r));if(l){t.splice(u--,1);var c=s();void 0!==c&&(e=c)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[o,s,r]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var s,r,i=o[0],l=o[1],a=o[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(s in l)n.o(l,s)&&(n.m[s]=l[s]);if(a)var u=a(n)}for(e&&e(o);c<i.length;c++)r=i[c],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(u)},o=self["webpackChunkcaoff_vote"]=self["webpackChunkcaoff_vote"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(3572)}));o=n.O(o)})();
//# sourceMappingURL=app.0b766351.js.map