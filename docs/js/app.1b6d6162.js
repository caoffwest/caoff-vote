(function(){"use strict";var t={6440:function(t,e,n){var o=n(144),s=n(998),r=n(3059),i=function(){var t=this,e=t._self._c;return e(s.Z,[e(r.Z,[t.songs.length>0?e("router-view",{attrs:{title:t.title,body:t.body,hashtag:t.hashtag,songs:t.songs}}):t._e()],1)],1)},l=[],a=n(196);const c="selectedSongs",u="https://db9qp4rc97c3t.cloudfront.net/caoffVoteInfo";var d={name:"App",data:()=>({title:"COUNT DOWN CAOFF 投票",body:'今年も<a href="https://arcane.com/ja-jp/" target="_blank">COUNTDOWN CAOFF</a>が12月31日に開催されます。<br/>\nそこで、2021年に発表されたアニソンの中で皆さんが良かったと思う曲ベスト10を決めたいと思います!!<br/>\nランキングは皆さんの投票で決定します。<br/>',hashtag:"caoff2023",songs:[]}),mounted(){a.ZP.get(u).then((t=>{this.title=t.data.title,this.body=t.data.body,this.hashtag=t.data.hashtag,this.songs=t.data.songs,document.title=this.title}))}},g=d,h=n(1001),f=(0,h.Z)(g,i,l,!1,null,null,null),p=f.exports,m=n(8345),v=n(6190),S=n(266),Z=n(2118),y=n(1713),b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"top"},[e(Z.Z,[e(y.Z,[e(S.Z,{attrs:{cols:"12"}},[e("h1",[t._v(t._s(t.title))])]),e(S.Z,{attrs:{cols:"12"}},[e("div",{domProps:{innerHTML:t._s(t.body)}})]),e(S.Z,{staticClass:"text-center",attrs:{cols:"12"}},[e(v.Z,{attrs:{"x-large":"",color:"primary"},on:{click:t.onClickNext}},[t._v("投票ページへ")])],1)],1)],1)],1)},_=[],C=(n(7658),{props:{title:String,body:String},methods:{onClickNext:function(){this.$router.push("/songList")}}}),k=C,x=(0,h.Z)(k,b,_,!1,null,null,null),w=x.exports,O=n(6072),P=n(1154),T=n(9582),j=n(4886),F=n(120),M=n(6718),N=n(5808),A=n(4525),B=n(5187),L=n(2017),q=n(7941),$=n(7423),I=n(3687),z=n(1280),D=function(){var t=this,e=t._self._c;return e("div",{staticClass:"songList"},[e(T.Z,[e(O.Z,{attrs:{fixed:""}},[e(z.Z,{staticClass:"mt-auto mb-auto mr-1",attrs:{solo:"",placeholder:"曲名/番組名で検索","prepend-inner-icon":"mdi-magnify"},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}),e(P.Z,{attrs:{color:"blue",overlap:"","offset-y":"20",content:t.selectedSongs.length,value:t.selectedSongs.length>=1}},[e(v.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.dialog=!0}}},[t._v(" 選んだ曲 ")])],1)],1),e($.Z,[e(Z.Z,[e("p",{staticClass:"mt-16"},[t._v("まずは3曲選ぼう。リストにない場合はtweetする時に自分で追加してね。")]),e(N.Z,{staticClass:"mb-12",attrs:{"two-line":""}},[e(q.Z,{attrs:{multiple:"",max:"0"},model:{value:t.listModel,callback:function(e){t.listModel=e},expression:"listModel"}},[t._l(t.filteredSongs,(function(n){return e(A.Z,{key:n.id,attrs:{value:n},on:{click:function(e){return t.listOnClick(n)}},scopedSlots:t._u([{key:"default",fn:function({active:o}){return[e(B.Z,[e(F.Z,{attrs:{"input-value":o,readonly:""}})],1),e(L.km,[e(L.V9,{domProps:{textContent:t._s(n.songTitle)}}),e(L.oZ,{domProps:{textContent:t._s(n.animeTitle)}})],1)]}}],null,!0)})}))],2)],1),e("div",{staticStyle:{position:"fixed",bottom:"20px",width:"100%","text-align":"center"}},[e(v.Z,{staticStyle:{width:"300px"},attrs:{color:"primary"},on:{click:function(e){return e.stopPropagation(),t.onClickSelectPriority.apply(null,arguments)}}},[t._v("順位を決める ")])],1)],1)],1)],1),e(M.Z,{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(T.Z,[e(j.EB,[t._v("選択済みの曲")]),t.selectedSongs.length>0?e(N.Z,{attrs:{"two-line":""}},[e(q.Z,{attrs:{multiple:""},model:{value:t.selectedSongs,callback:function(e){t.selectedSongs=e},expression:"selectedSongs"}},[t._l(t.selectedSongs,(function(n){return e(A.Z,{key:n.id,attrs:{value:n},scopedSlots:t._u([{key:"default",fn:function({active:o}){return[e(B.Z,[e(F.Z,{attrs:{"input-value":o,readonly:""}})],1),e(L.km,[e(L.V9,{domProps:{textContent:t._s(n.songTitle)}}),e(L.oZ,{domProps:{textContent:t._s(n.animeTitle)}})],1)]}}],null,!0)})}))],2)],1):e(j.ZB,[e("div",{staticClass:"text-body-1 pt-5 pl-5"},[t._v("選択済みの曲はありません")])]),e(j.h7,[e(I.Z),e(v.Z,{attrs:{color:"primary",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Close ")]),e(I.Z)],1)],1)],1)],1)},E=[],V={props:{songs:Array},data:()=>({songsForSearch:[],selectedSongs:[],query:"",dialog:!1}),methods:{onClickSelectPriority:function(){sessionStorage.setItem(c,JSON.stringify(this.selectedSongs)),this.$router.push("/vote")},normarize:function(t){const e=/[\u30A1-\u30FA]/g;return t.toLowerCase().replace(e,(t=>String.fromCharCode(t.charCodeAt(0)-96)))},listOnClick:function(t){const e=this.selectedSongs.filter((e=>e.id!=t.id));e.length<this.selectedSongs.length?this.selectedSongs=e:this.selectedSongs.length<3&&this.selectedSongs.push(t)}},computed:{filteredSongs:function(){const t=this.normarize(this.query);return this.songsForSearch.filter((e=>0==this.query.length||e.searchString.includes(t)))},listModel:{get:function(){return this.filteredSongs.filter((t=>this.selectedSongs.find((e=>e.id==t.id))))},set:function(t){t.length}}},mounted(){Object.prototype.hasOwnProperty.call(sessionStorage,c)&&(this.selectedSongs=JSON.parse(sessionStorage.getItem(c))),this.songsForSearch=this.songs.concat(),this.songsForSearch.forEach((t=>{t.searchString=this.normarize(t.songTitle)+"_"+this.normarize(t.animeTitle)}))}},J=V,U=(0,h.Z)(J,D,E,!1,null,null,null),W=U.exports,H=n(4324),R=n(4611),G=function(){var t=this,e=t._self._c;return e("div",{staticClass:"vote"},[e(Z.Z,[e(y.Z,[e(S.Z,{attrs:{cols:"12"}},[e("p",[t._v("並び変えて順位を決めたら、投票するボタンをクリック！")]),e(N.Z,{attrs:{"two-line":""}},[[e("draggable",{attrs:{draggable:".draggable-item"},model:{value:t.selectedSongs,callback:function(e){t.selectedSongs=e},expression:"selectedSongs"}},t._l(t.selectedSongs,(function(n,o){return e(A.Z,{key:`${o}`,staticClass:"elevation-4 ma-2 draggable-item",attrs:{value:n}},[e(R.Z,[e(H.Z,{attrs:{color:t.iconColor(o)}},[t._v("mdi-numeric-"+t._s(o+1)+"-box")])],1),e(L.km,[e(L.V9,{domProps:{textContent:t._s(n.songTitle)}}),e(L.oZ,{domProps:{textContent:t._s(n.animeTitle)}})],1)],1)})),1)]],2)],1),e(S.Z,{staticClass:"text-center",attrs:{cols:"12"}},[e(v.Z,{staticClass:"mr-2",attrs:{"x-large":""},on:{click:t.onClickBack}},[t._v("戻る")]),e(v.Z,{attrs:{"x-large":"",color:"#1DA1F2"},on:{click:t.onClickTweet}},[e(H.Z,[t._v("mdi-twitter")]),t._v(" 投票する ")],1)],1)],1)],1)],1)},K=[],Q=n(9980),X=n.n(Q),Y={props:{hashtag:String},data:()=>({selectedSongs:[],draggableModel:[]}),components:{draggable:X()},methods:{iconColor:function(t){switch(t){case 0:return"#E6B422";case 1:return"#C0C0C0";default:return"#BB641D"}},onClickTweet:function(){const t=new URL("https://twitter.com/intent/tweet");t.searchParams.set("text",this.selectedSongs.map(((t,e)=>"string"==typeof t.id&&t.id.startsWith("empty-")?e+1+"位:{入力してください}":e+1+"位:"+t.songTitle+"/"+t.animeTitle)).join("\n")+"\n"+location.href.replace(/#\/vote$/,"")),t.searchParams.set("hashtags",this.hashtag),sessionStorage.removeItem(c),window.location.href=t},onClickBack:function(){this.$router.push("/songList")}},mounted(){if(Object.prototype.hasOwnProperty.call(sessionStorage,c)&&(this.selectedSongs=JSON.parse(sessionStorage.getItem(c))),this.selectedSongs.length<3)for(let t=this.selectedSongs.length;t<3;t++)this.selectedSongs.push({songTitle:"tweetするときに曲名を入力してね",animeTitle:"",id:"empty-"+t})}},tt=Y,et=(0,h.Z)(tt,G,K,!1,null,null,null),nt=et.exports;o.ZP.use(m.ZP);const ot=[{path:"/",name:"top",component:w,props:!0},{path:"/songList",name:"songList",component:W,props:!0},{path:"/vote",name:"vote",component:nt,props:!0}],st=new m.ZP({mode:"hash",base:"/caoff-vote/",routes:ot,scrollBehavior(t,e,n){return n||{x:0,y:0}}});var rt=st,it=n(8864);o.ZP.use(it.Z);var lt=new it.Z({theme:{dark:!0,themes:{dark:{primary:"#FF0066"}}}});o.ZP.config.productionTip=!1,new o.ZP({router:rt,vuetify:lt,render:t=>t(p)}).$mount("#app")}},e={};function n(o){var s=e[o];if(void 0!==s)return s.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,n),r.exports}n.m=t,function(){var t=[];n.O=function(e,o,s,r){if(!o){var i=1/0;for(u=0;u<t.length;u++){o=t[u][0],s=t[u][1],r=t[u][2];for(var l=!0,a=0;a<o.length;a++)(!1&r||i>=r)&&Object.keys(n.O).every((function(t){return n.O[t](o[a])}))?o.splice(a--,1):(l=!1,r<i&&(i=r));if(l){t.splice(u--,1);var c=s();void 0!==c&&(e=c)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[o,s,r]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var s,r,i=o[0],l=o[1],a=o[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(s in l)n.o(l,s)&&(n.m[s]=l[s]);if(a)var u=a(n)}for(e&&e(o);c<i.length;c++)r=i[c],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(u)},o=self["webpackChunkcaoff_vote"]=self["webpackChunkcaoff_vote"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(6440)}));o=n.O(o)})();
//# sourceMappingURL=app.1b6d6162.js.map